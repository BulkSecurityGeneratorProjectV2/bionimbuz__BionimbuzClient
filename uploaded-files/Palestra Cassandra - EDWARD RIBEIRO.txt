Palestra EDWARD RIBEIRO

Palestra sobre CASSANDRA

*	Introdução

o	Cassandra - Criado pelo Facebook
o	Banco de Dados distribuídos
o	Adotado pela Apache
o	Une BigTable com o modelo da Dynao (Amazon)
o	Conceitos principais de arquitetura do Cassandra: KeySpace, Column, Column Family e Row Key
 
*	Arquitetura do Cassandra

o	Modelo cluster peer-to-peer
o	Para suportar um número 'f' de falhas: Nservidores = (2 * f) + 1
o	Arquitetura P2P: Cada nó é responsável por um intervalo de registro
o	No caso de falha, uma máquina passa a ser responsável por um intervalo maior
o	Em um cluster cassandra você pode definir vários keyspace (um database, em MySQL, por exemplo)
o	Fator de replicação: quantidade de vezes que um arquivo é replicado dentro do cluster Cassandra
o	Quando uma máquina que estava em falha retorna, a máquina que ficou responsável transfere os arquivos de volta para a máquina original
o 	A melhor maneira de se utilizar o Cassandra é instalá-lo em diversos datacenters

*	Cassandra com BigTable

o 	Herdou o modelo de dados do BigTable
o 	(chave, família de coluna, coluna) -> célula : dessa forma você recupera uma célula
o 	Células são versionadas.
o 	Possui chave primária. Chaves primárias são ordenadas lexicograficamente

*	Conceitos de Arquitetura

o 	Registros são mantidos em memória -> MEMTABLE
o 	Usuário executa um comando de escrita -> Cassandra commita em um arquivo de LOG -> Quando o MEMTABLE está cheio, há um flush para as SSTables
o 	SSTables: São realmente os dados em disco (melhor em SSD)
o 	Os SSTables só crescem em tamanho. Para que haja uma "limpa" desses arquivos (retirando os registros deletados), é necessário executar o comando COMPACTION

* 	Keyspace

o 	Análogo à um banco de dados
o 	Determina o fator de replicação
o 	Ex: create keyspace k1 with replication = {'class':'SimpleStrategy', 'replicationFactor':'2'}
o 	Primary Key em Cassandra determina a máquina em qual o registro será persistido = PARTITION KEY

* 	Compound Key

o 	Contém:
 	o 	uma Partition Key
 	o 	

* 	Composite Key

o 	Contém:
	o 	Duas ou mais partition 
	o 	Uma ou mais clustering columns

Obs: Utilizar UUID como identificador universal (primary key)
Obs: Não esqeucer de executar o COMPACTION (de preferência em horários de pouca utilização).


Referência:
o	Artigo Referência sobre o Dynamo: "Dynamo: A distributed storage system for structured data"