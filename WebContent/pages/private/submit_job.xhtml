<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:decorate template="/resources/templates/template.xhtml">

	<!-- Center Content -->
	<ui:define name="conteudo_centro">
		<h:form id="form">
			<p:growl id="growl" autoUpdate="true" showDetail="true" showSummary="true"/>

			<p:wizard nextLabel="Avançar" backLabel="Voltar">
				<p:tab id="workflow_1" title="Workflow">
					<p:panel id="workflow_pnl">   
							<p:panelGrid style="width: 100%">
								<p:row>
									<!-- Workflow diagram -->
									<p:column style="width: 60em; vertical-align: top">
										<p:panel>
											<p:panel id="controller_pnl" header="Controles">
												<p:commandButton value="Desfazer" 
													styleClass="controller_btn" 
													action="#{submitJobBean.undoAddition()}" 
													update="form:workflow_pnl" 
													disabled="#{submitJobBean.workflowIndex le 0}"/>
													
												<p:commandButton value="Reiniciar" 
													styleClass="controller_btn" 
													action="#{submitJobBean.resetWorkflow()}" 
													update="form:workflow_pnl" 
													disabled="#{submitJobBean.workflowIndex == 0}" />
											</p:panel>
											
											<p:diagram id="workflow_diagram" 
												value="#{submitJobBean.workflowModel}" 
												style="height:600px"/>
										</p:panel>
									</p:column>
									
									<!-- Action colum -->
									<p:column style="width: 20em; vertical-align: top">
										<p:panel>
											<!-- Sequential element section -->
											<p:dataTable value="#{submitJobBean.sequentialProgramList}" var="p">
												<f:facet name="header">
													Adicionar elemento sequencial
													<p:commandButton id="info" value="Info"/>
													
													<p:overlayPanel for="info" 
														showEvent="mouseover" showEffect="fade" appendToBody="true" 
														hideEvent="mouseout" hideEffect="fade">
														teste
													</p:overlayPanel>
													</f:facet>
												
												<p:column>
													<p:commandButton id="bowtie" value="#{p.name}" 
														action="#{submitJobBean.addSequentialElement(p.name)}" 
														update="form:workflow_pnl" 
														styleClass="workflow_btn" />
												</p:column>
											</p:dataTable>
											
											<br />
											
											<!-- Parallel element section -->
											<p:dataTable id="parallel_datatable" value="#{submitJobBean.parallelProgramList}" var="p" >
												<f:facet name="header">Adicionar elemento paralelo</f:facet>
												
												<p:column>
													<p:commandButton id="program_btn" value="#{p.name}" 
														styleClass="workflow_btn"
														disabled="#{submitJobBean.parallelElementAdded}"/>
													
													<p:overlayPanel id="overlay" for="program_btn" 
														at="bottom" showEffect="fade" hideEffect="fade" >
														
														<p:panel header="Adicionar instâncias">
															Quantas instâncias você gostaria de adicionar paralelamente? <br /> <br />
															<p:inputText id="instances" size="7" /> instâncias

															<p:commandButton value="Adicionar" 
																actionListener="#{submitJobBean.addParallelElement(p.name)}" 
																update="form:workflow_pnl"/>
														</p:panel>
													</p:overlayPanel>
												</p:column>
												
											</p:dataTable>
											
										</p:panel>
									</p:column>
								</p:row>
							</p:panelGrid>	
					</p:panel>
				</p:tab>
				
			 	<p:tab title="Arquivos">
			 	</p:tab>

			 	<p:tab title="Resumo">
			 	</p:tab>
			</p:wizard>
		</h:form>
	</ui:define>
</ui:decorate>
</html>